{% extends "base.html" %}

{% block title %}Home - Crypto Prices & Market Stats{% endblock %}

{% block content %}
<!-- Market Overview -->
<div class="row mb-4">
    <div class="col-12">
        <div class="card shadow">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0"><i class="fas fa-globe"></i> Market Overview</h4>
            </div>
            <div class="card-body">
                <div class="row text-center">
                    <div class="col-md-3 mb-3">
                        <div class="p-3 bg-light rounded">
                            <h6 class="text-muted">Total Market Cap</h6>
                            <h3>${{ "{:,.1f}".format(market_stats.total_market_cap / 1000000000) }}B</h3>
                            <small class="text-success"><i class="fas fa-arrow-up"></i> {{ market_stats.market_cap_change }}%</small>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div class="p-3 bg-light rounded">
                            <h6 class="text-muted">24h Volume</h6>
                            <h3>${{ "{:,.1f}".format(market_stats.total_volume / 1000000000) }}B</h3>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div class="p-3 bg-light rounded">
                            <h6 class="text-muted">BTC Dominance</h6>
                            <h3>{{ market_stats.btc_dominance }}%</h3>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div class="p-3 bg-light rounded">
                            <h6 class="text-muted">Market Sentiment</h6>
                            <h3 class="{% if market_stats.sentiment == 'Bullish' %}text-success{% else %}text-danger{% endif %}">
                                {{ market_stats.sentiment }}
                            </h3>
                            <small>{{ market_stats.positive_coins }}↑ / {{ market_stats.negative_coins }}↓</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Top Cryptocurrencies -->
<div class="row mb-4">
    <div class="col-12">
        <div class="card shadow">
            <div class="card-header">
                <h4 class="mb-0"><i class="fas fa-coins"></i> Top Cryptocurrencies</h4>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Name</th>
                                <th>Price</th>
                                <th>24h Change</th>
                                <th>Market Cap</th>
                                <th>24h Volume</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for crypto in cryptos %}
                            <tr>
                                <td>{{ crypto.rank }}</td>
                                <td>
                                    <img src="{{ crypto.image }}" alt="{{ crypto.name }}" style="width: 24px; height: 24px;">
                                    <strong class="ms-2">{{ crypto.name }}</strong>
                                    <small class="text-muted">({{ crypto.symbol }})</small>
                                </td>
                                <td>${{ "{:,.2f}".format(crypto.price) }}</td>
                                <td class="{% if crypto.change_24h >= 0 %}text-success{% else %}text-danger{% endif %}">
                                    <i class="fas {% if crypto.change_24h >= 0 %}fa-arrow-up{% else %}fa-arrow-down{% endif %}"></i>
                                    {{ "{:.2f}".format(crypto.change_24h) }}%
                                </td>
                                <td>${{ "{:,.0f}".format(crypto.market_cap) }}</td>
                                <td>${{ "{:,.0f}".format(crypto.volume) }}</td>
                                <td>
                                    <a href="/crypto/{{ crypto.id }}" class="btn btn-sm btn-primary">
                                        <i class="fas fa-chart-line"></i> View
                                    </a>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <div class="text-center mt-3">
                    <a href="/market" class="btn btn-primary">
                        <i class="fas fa-arrow-right"></i> View All Cryptocurrencies
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Gainers & Losers -->
<div class="row">
    <div class="col-md-6 mb-4">
        <div class="card shadow h-100">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0"><i class="fas fa-arrow-up"></i> Top Gainers (24h)</h5>
            </div>
            <div class="card-body">
                {% for crypto in gainers %}
                <div class="d-flex justify-content-between align-items-center mb-3 p-2 border-bottom">
                    <div>
                        <img src="{{ crypto.image }}" alt="{{ crypto.name }}" style="width: 24px; height: 24px;">
                        <strong class="ms-2">{{ crypto.symbol }}</strong>
                        <small class="text-muted">{{ crypto.name }}</small>
                    </div>
                    <div class="text-success">
                        <strong>+{{ "{:.2f}".format(crypto.change_24h) }}%</strong>
                        <br>
                        <small>${{ "{:,.2f}".format(crypto.price) }}</small>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    
    <div class="col-md-6 mb-4">
        <div class="card shadow h-100">
            <div class="card-header bg-danger text-white">
                <h5 class="mb-0"><i class="fas fa-arrow-down"></i> Top Losers (24h)</h5>
            </div>
            <div class="card-body">
                {% for crypto in losers %}
                <div class="d-flex justify-content-between align-items-center mb-3 p-2 border-bottom">
                    <div>
                        <img src="{{ crypto.image }}" alt="{{ crypto.name }}" style="width: 24px; height: 24px;">
                        <strong class="ms-2">{{ crypto.symbol }}</strong>
                        <small class="text-muted">{{ crypto.name }}</small>
                    </div>
                    <div class="text-danger">
                        <strong>{{ "{:.2f}".format(crypto.change_24h) }}%</strong>
                        <br>
                        <small>${{ "{:,.2f}".format(crypto.price) }}</small>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>

<!-- Info Box -->
<div class="row">
    <div class="col-12">
        <div class="alert alert-info">
            <h5><i class="fas fa-info-circle"></i> How Crypto Hunter Works</h5>
            <p>Crypto Hunter uses free public APIs to fetch real-time cryptocurrency data. When online, it fetches live data from CoinGecko. When offline or if APIs fail, it uses sample data with realistic variations.</p>
            <ul>
                <li><strong>No API Key Required</strong> - Completely free to use</li>
                <li><strong>Real-time Updates</strong> - Auto-refreshes every 30 seconds</li>
                <li><strong>Portfolio Tracking</strong> - Track your investments</li>
                <li><strong>Detailed Analysis</strong> - View charts and statistics</li>
            </ul>
        </div>
    </div>
</div>
{% endblock %}
